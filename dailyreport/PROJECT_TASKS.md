# Culture Bridge Program 2025 Web Platform - タスク一覧

このドキュメントは `CURSOR_PRD.md` に基づき、プロジェクトを完成させるためのタスクを細分化したものです。

## フェーズ1: 企画・設計

### 1.1. 詳細要件定義
    - [x] PRDレビューと関係者ヒアリング
    - [/] 各機能の詳細仕様策定 (入力、出力、処理フロー)
    - [ ] 画面遷移図の作成
    - [ ] ユーザー権限ごとのユースケース洗い出し
    - [ ] API連携先の仕様確認 (Gemini API, Google OAuth, Notion API)
    - [ ] PDF生成・ダウンロード機能の詳細仕様策定
    - [ ] 多言語対応（日本語・英語）の範囲と仕様確定

### 1.2. UI/UXデザイン
    - [ ] ワイヤーフレーム作成 (全ページ・主要コンポーネント)
    - [ ] モックアップデザイン作成 (主要ページ・デザインシステム定義)
    - [ ] プロトタイプ作成 (主要画面遷移・インタラクション確認用)
    - [ ] レスポンシブデザインの考慮 (PC/スマホ)
    - [ ] アクセシビリティガイドラインの確認とデザインへの反映

### 1.3. データベース設計 (Supabase)
    - [x] PRD記載のテーブル構造を基に詳細設計
        - [x] `users` テーブル詳細設計 (カラム定義、制約、インデックス)
        - [x] `groups` テーブル詳細設計
        - [ ] `resources` テーブル詳細設計
        - [x] `works` テーブル詳細設計
        - [ ] `feedback` テーブル詳細設計
        - [ ] `messages` テーブル詳細設計
        - [ ] その他必要なテーブルの洗い出しと設計
    - [x] リレーションシップの定義
    - [x] Supabase Auth との連携設計
    - [x] RLS (Row Level Security) ポリシーの設計

### 1.4. API設計
    - [ ] フロントエンドとバックエンド間のAPIエンドポイント定義
    - [ ] Supabase Edge Functions で実装するAPIの設計
    - [ ] 外部API (Gemini, Google OAuth, Notion) との連携インターフェース設計
    - [ ] リクエスト・レスポンス形式の定義
    - [ ] エラーハンドリング設計

### 1.5. インフラ・開発環境設計
    - [x] Supabaseプロジェクト設定方針
    - [x] Next.js開発環境構築方針
    - [x] バージョン管理戦略 (Git, ブランチモデル)
    - [ ] CI/CDパイプライン設計 (任意)

---

## フェーズ2: 開発環境構築

    - [x] Next.js 15 プロジェクトセットアップ
    - [x] Tailwind CSS, shadcn/ui の導入と初期設定
    - [x] Supabaseプロジェクト作成と初期設定
    - [ ] Supabase CLI の導入と設定
    - [x] ローカル開発環境でのSupabase連携設定
    - [x] Google OAuthクライアントID/シークレット取得と設定
    - [ ] Gemini APIキー取得と設定
    - [ ] Notion APIトークン取得と設定 (オプション)
    - [x] Gitリポジトリ作成と初期コミット
    - [x] Lintツール、フォーマッタ設定 (ESLint, Prettierなど)

---

## フェーズ3: バックエンド開発 (Supabase)

### 3.1. データベース構築
    - [ ] Supabaseマイグレーションファイル作成
    - [x] `users` テーブル作成とRLS設定
    - [x] `groups` テーブル作成とRLS設定
    - [ ] `resources` テーブル作成とRLS設定
    - [x] `works` テーブル作成とRLS設定
    - [ ] `feedback` テーブル作成とRLS設定
    - [ ] `messages` テーブル作成とRLS設定
    - [ ] 初期データ投入スクリプト作成 (テスト用など)

### 3.2. 認証機能 (Supabase Auth)
    - [x] Google OAuth連携実装
    - [x] メールアドレス・パスワード認証実装 (必要に応じて)
    - [x] ユーザー登録フロー実装
    - [x] ログイン・ログアウト機能実装
    - [x] パスワードリセット機能実装 (必要に応じて)
    - [x] ユーザーロール管理機能の基礎実装

### 3.3. API開発 (Supabase Edge Functions)
    - [x] リソース検索用API (Gemini連携含む)
    - [x] ワーク提出・更新API
    - [x] フィードバック登録・取得API (worksに含まれる)
    - [ ] チャットメッセージ送受信API (Supabase Realtime連携含む)
    - [ ] 資料アップロード・ダウンロードAPI (Supabase Storage連携含む)
    - [x] ユーザー情報取得・更新API
    - [x] グループ管理API (運営用)
    - [ ] PDF生成・修了証発行API

### 3.4. ストレージ設定 (Supabase Storage)
    - [ ] 資料アップロード用バケット作成とポリシー設定
    - [ ] ユーザーアイコン用バケット作成とポリシー設定 (必要に応じて)
    - [ ] ワーク提出ファイル用バケット作成とポリシー設定

### 3.5. リアルタイム機能 (Supabase Realtime)
    - [ ] チャット機能のリアルタイム更新実装
    - [ ] ダッシュボードの進捗状況リアルタイム更新 (検討)

---

## フェーズ4: フロントエンド開発

### 4.1. 共通コンポーネント開発
    - [x] UIキット (shadcn/ui) をベースとしたカスタムコンポーネント開発
    - [x] レイアウトコンポーネント (ヘッダー, フッター, サイドバーなど)
    - [x] 認証状態管理 (Context API, Zustand, etc.)
    - [ ] フォームコンポーネント
    - [ ] 通知・アラートコンポーネント
    - [ ] 多言語切り替えコンポーネント

### 4.2. 一般公開ページ (LP/トップ)
    - [x] プログラム概要表示
    - [x] 4日間の特徴紹介セクション
    - [x] 申し込み・FAQ・問い合わせ導線設置
    - [x] レスポンシブ対応
    - [x] 開催日時表示（7月28日-31日）
    - [x] 緊急性・希少性を訴求するマーケティング要素追加

### 4.3. 認証ページ
    - [x] ログインページ (Google OAuthボタン)
    - [x] 新規登録ページ (必要に応じて)

### 4.4. 生徒ダッシュボード
    - [x] 進捗表示 (ワーク/課題/スピーチ)
    - [ ] 提出物一覧・フィードバック確認機能
    - [x] グループ情報・担当留学生表示
    - [ ] チャット機能インターフェース
    - [ ] タイムテーブル・本日のやること表示
    - [ ] お気に入り/資料DL履歴表示
    - [ ] 個別メモ／自己目標設定機能

### 4.5. 留学生ダッシュボード
    - [ ] 担当生徒・グループ管理機能
    - [ ] 交流メッセージ機能
    - [ ] 進行用ガイド・活動例・ファシリテーションTips表示
    - [ ] 資料・テンプレートDL機能
    - [ ] 留学生自己紹介編集機能

### 4.6. 運営ダッシュボード
    - [ ] 全体進捗／提出状況管理機能
    - [ ] 出欠管理機能
    - [ ] アンケート集計表示機能
    - [ ] 資料・ワークシートのアップロード／配布機能
    - [ ] グループ編成機能
    - [ ] ユーザー権限管理機能

### 4.7. リソース検索・共有ページ
    - [ ] Gemini API/ニュース検索機能
    - [ ] 検索結果表示・保存・メモ機能
    - [ ] 「ボランティア」「SDGs」等トレンド記事表示機能
    - [ ] 参考資料シェア・お気に入り機能

### 4.8. ワークページ (Dayごと)
    - [ ] 日々のアクティビティ解説表示
    - [ ] 生徒用・留学生用ガイド表示
    - [ ] 実施例・進行指示例・FAQ表示
    - [x] ワーク提出フォーム (添付・画像・動画・テキスト対応)
    - [ ] 自動フィードバック表示機能 (部分的なものも含む)
    - [ ] 提出済みワークダウンロード機能

### 4.9. プレゼンテンプレート・TIPSページ
    - [ ] スライド構成例・英語フレーズ集表示
    - [ ] 練習・撮影ガイド、発表のコツ動画表示/埋め込み
    - [ ] 過去の優秀事例アーカイブ表示

### 4.10. 留学生紹介ページ
    - [ ] 留学生プロフィール一覧表示 (顔写真、出身国、自己PR)
    - [ ] 各生徒とのマッチング表示 (生徒ログイン時)

### 4.11. PDF資料ダウンロード機能
    - [ ] 各種資料のダウンロードボタン設置
    - [ ] ダウンロード履歴管理機能 (ダッシュボード内)

### 4.12. その他推奨機能 (PRD 2.8)
    - [ ] 保護者・学校向けページ (静的コンテンツ中心)
    - [ ] 掲示板機能 (ロール別アクセス制御)
    - [ ] 修了証自動発行連携 (ダッシュボード内)
    - [ ] AIチャット・スピーキング練習bot連携 (外部サービス埋め込み or API連携)

### 4.13. 多言語対応
    - [ ] i18nライブラリ導入 (next-i18nextなど)
    - [ ] 各ページの文言を翻訳ファイルに分離
    - [ ] 日本語・英語の翻訳ファイル作成
    - [ ] 言語切り替え機能実装

---

## フェーズ5: 統合・テスト

### 5.1. 単体テスト
    - [ ] 主要コンポーネントのテスト (Jest, React Testing Library)
    - [ ] Supabase Edge Functions の単体テスト

### 5.2. 結合テスト
    - [ ] フロントエンドとバックエンドAPIの結合テスト
    - [ ] 認証フローテスト
    - [ ] ワーク提出・フィードバックフローテスト
    - [ ] チャット機能テスト
    - [ ] 資料管理フローテスト
    - [ ] 外部API連携テスト (Gemini, Google OAuth)

### 5.3. E2Eテスト
    - [ ] 主要ユースケースのE2Eテスト (Cypress, Playwrightなど)
    - [ ] ユーザー登録から修了証発行までのシナリオテスト (運営・生徒・留学生ロールごと)

### 5.4. ユーザビリティテスト
    - [ ] ターゲットユーザーによるテスト実施
    - [ ] フィードバック収集と改善

### 5.5. パフォーマンテスト
    - [ ] 主要ページの表示速度測定 (Lighthouseなど)
    - [ ] APIレスポンス速度測定

### 5.6. セキュリティテスト
    - [ ] Supabase RLS設定の検証
    - [ ] XSS, CSRFなどの基本的な脆弱性チェック
    - [ ] 認証・認可ロジックの検証
    - [ ] 依存ライブラリの脆弱性スキャン

### 5.7. レスポンシブテスト
    - [ ] 各種デバイス・ブラウザでの表示確認

### 5.8. 多言語表示テスト
    - [ ] 日本語・英語表示の崩れや翻訳漏れがないか確認

### 5.9. アクセシビリティテスト
    - [ ] WCAG基準に基づいた基本的なチェック (Lighthouse, axeなど)

---

## フェーズ6: リリース準備・デプロイ

    - [ ] 本番環境用Supabaseプロジェクト設定
    - [ ] 本番環境用Next.jsビルド設定
    - [ ] デプロイ先プラットフォーム選定と設定 (Vercel, Netlifyなど)
    - [ ] ドメイン設定・SSL証明書設定
    - [ ] CI/CDパイプライン構築 (本番用)
    - [ ] データ移行計画 (必要であれば)
    - [ ] リリース前最終チェックリスト作成と実行
    - [ ] リリース手順書作成
    - [ ] 本番デプロイ実施
    - [ ] リリース後動作確認

---

## フェーズ7: 運用・保守

    - [ ] モニタリング設定 (エラー監視, パフォーマンス監視)
    - [ ] ログ収集・分析設定
    - [ ] バックアップ戦略の確認 (Supabaseの自動バックアップ活用)
    - [ ] 障害対応フローの確立
    - [ ] 問い合わせ対応体制の準備
    - [ ] 運用マニュアル作成 (運営者向け)
    - [ ] 開発者向けドキュメント整備
    - [ ] 定期的なメンテナンス計画 (ライブラリ更新など)
    - [ ] ユーザーフィードバック収集と改善サイクルの確立

---

## その他・継続的タスク

    - [x] 定期的な進捗会議・報告
    - [ ] ドキュメントの継続的な更新
    - [ ] 技術的負債の管理と返済計画
    - [ ] PRD記載の「今後の相談ポイント」の検討と対応
        - [ ] ワークシート・発表テンプレート実装例詳細検討
        - [ ] AIボットや自動翻訳の導入範囲詳細検討
        - [ ] データバックアップ／エクスポート設計詳細検討
        - [ ] 各校ごとのカスタマイズ可否検討 